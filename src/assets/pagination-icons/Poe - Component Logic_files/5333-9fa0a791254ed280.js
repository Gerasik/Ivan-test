(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5333],{41677:function(e,a,t){"use strict";var n,l,s=t(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}a.Z=function(e){return s.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=s.createElement("path",{d:"m21.205 7.556-5.291-5.265A.995.995 0 0 0 15.209 2h-6.5a1 1 0 0 0-1 1v2.235h2V4h4.503v4.265a1 1 0 0 0 1 1H19.5v5.5h-1.209v2H20.5a1 1 0 0 0 1-1v-7.5a.998.998 0 0 0-.295-.709Zm-4.993-2.147 1.865 1.856h-1.865V5.409Z"})),l||(l=s.createElement("path",{d:"m15.996 12.791-5.291-5.265a1 1 0 0 0-.705-.29H3.5a1 1 0 0 0-1 1V21a1 1 0 0 0 1 1h11.791a1 1 0 0 0 1-1v-7.5a1 1 0 0 0-.295-.709Zm-4.993-2.147 1.865 1.856h-1.865v-1.856ZM4.5 20V9.235h4.503V13.5a1 1 0 0 0 1 1h4.288V20H4.5Z"})))}},99240:function(e,a,t){"use strict";var n,l,s=t(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}a.Z=function(e){return s.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=s.createElement("path",{d:"M19.5 21h-15c-.55 0-1-.45-1-1v-3c0-.55.45-1 1-1s1 .45 1 1v2h13v-2c0-.55.45-1 1-1s1 .45 1 1v3c0 .55-.45 1-1 1Z"})),l||(l=s.createElement("path",{d:"M12 16.5c-.25 0-.48-.09-.65-.24-.01-.01-.02-.01-.02-.02l-6.05-5.5a.997.997 0 1 1 1.34-1.48L11 13.24V4c0-.55.45-1 1-1s1 .45 1 1v9.23l4.38-3.97a.997.997 0 1 1 1.34 1.48l-5.98 5.43c-.18.2-.44.33-.74.33Z"})))}},97341:function(e,a,t){"use strict";var n,l=t(67294);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}a.Z=function(e){return l.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1ZM12 16a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0v-4a1 1 0 0 1 1-1ZM5.293 5.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1-1.414 1.414l-2-2a1 1 0 0 1 0-1.414ZM15.293 15.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1-1.414 1.414l-2-2a1 1 0 0 1 0-1.414ZM2 12a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1ZM16 12a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1ZM8.707 15.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 0 1-1.414-1.414l2-2a1 1 0 0 1 1.414 0ZM18.707 5.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414l2-2a1 1 0 0 1 1.414 0Z"})))}},73496:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"showDescription"}],kind:"Fragment",metadata:null,name:"BotHeader_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLimitedAccess",storageKey:null},{condition:"showDescription",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}]},{args:null,kind:"FragmentSpread",name:"BotImage_bot"},{args:null,kind:"FragmentSpread",name:"BotLink_bot"},{args:null,kind:"FragmentSpread",name:"IdAnnotation_node"},{args:null,kind:"FragmentSpread",name:"botHelpers_useViewerCanAccessPrivateBot"},{args:null,kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"},{args:null,kind:"FragmentSpread",name:"botHelpers_useIsSDXL_bot"}],type:"Bot",abstractKey:null};n.hash="e0a5f21c3b5a0d14b9b12baae7eedd1d",a.default=n},34122:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BotHeader_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"hasActiveSubscription",storageKey:null}],type:"Viewer",abstractKey:null};n.hash="b4fa7b95e577d1be47aa52afc4e565f8",a.default=n},33891:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BotLink_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null}],type:"Bot",abstractKey:null};n.hash="574ee5a4c6d9ba8ef15b0678164be116",a.default=n},9945:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MarkdownLinkInner_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{args:null,kind:"FragmentSpread",name:"chatHelpers_useSendMessage_bot"},{args:null,kind:"FragmentSpread",name:"subscriptionHelpers_useBotLogData_bot"}],type:"Bot",abstractKey:null};n.hash="c9f4d839783a347596c22d1b44fc4074",a.default=n},48656:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MarkdownLinkInner_chat",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chatId",storageKey:null},{alias:null,args:null,concreteType:"Bot",kind:"LinkedField",name:"defaultBotObject",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MarkdownLinkInner_bot"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"chatHelpers_useSendMessage_chat"}],type:"Chat",abstractKey:null};n.hash="eb3d632b6f537c2d37fd0240f4d6876a",a.default=n},19507:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"MarkdownLinkInner_edges",selections:[{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null}],storageKey:null}],type:"MessageEdge",abstractKey:null};n.hash="ff4cf25735141e7e3dc08dbbcef3b9bc",a.default=n},19266:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MarkdownLinkInner_message",selections:[{alias:null,args:null,kind:"ScalarField",name:"messageId",storageKey:null}],type:"Message",abstractKey:null};n.hash="9c98426e093c03448b0751e836ae3735",a.default=n},98989:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Message_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"isApiBot",storageKey:null}],type:"Bot",abstractKey:null};n.hash="7dfacd681672e42424101fb8d87e8f31",a.default=n},94864:function(e,a,t){"use strict";t.r(a);let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Message_viewer",selections:[{alias:"allowImages",args:[{kind:"Literal",name:"gateName",value:"poe_allow_images"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_allow_images")'},{alias:"allowImagesForApiBots",args:[{kind:"Literal",name:"gateName",value:"poe_allow_images_for_api_bots"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_allow_images_for_api_bots")'},{alias:"enableImageViewer",args:[{kind:"Literal",name:"gateName",value:"poe_web_image_viewer"}],kind:"ScalarField",name:"booleanGate",storageKey:'booleanGate(gateName:"poe_web_image_viewer")'},{alias:null,args:null,kind:"ScalarField",name:"promptBotImageDomainWhitelist",storageKey:null}],type:"Viewer",abstractKey:null};n.hash="7744e9365a392d2e663e51089a74af08",a.default=n},4824:function(e,a,t){"use strict";var n=t(85893),l=t(22120),s=t(22578),r=t(65869),o=t(37650),i=t(34616),c=t(24165),d=t.n(c),u=t(47547),g=t(94639);a.Z=e=>{let a,{bot:c,viewer:m,bold:_=!1,showLimitedAccess:h=!1,linked:p=!1,botIconSize:b=36,onClick:k,className:f}=e,v=(0,s.useFragment)(t(73496),c),w=(0,s.useFragment)(t(34122),m),{t:x}=(0,l.$G)(),y=(0,o.nn)(v),{isDeleted:B}=(0,o.iZ)(v),M=(0,o.FL)(v),C=B||!y,N=h&&v.isLimitedAccess&&!M,j=N&&(null==w?void 0:w.hasActiveSubscription);a=B?x("Deleted"):y?j?x("Subscription access"):N?x("Limited access"):v.description:x("Private");let Z=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{bot:v,size:b}),(0,n.jsxs)("div",{className:d().textContainer,children:[(0,n.jsx)("p",{children:v.displayName}),a&&(0,n.jsx)("p",{className:d().subText,children:a}),(0,n.jsx)(r.Z,{node:v})]})]}),F=(0,i.$)(_?d().boldTitle:d().title,f);return p?(0,n.jsx)(g.Z,{className:F,bot:v,"data-deleted":C||void 0,onClick:k,children:Z}):(0,n.jsx)("div",{className:F,"data-deleted":C||void 0,onClick:k,children:Z})}},94639:function(e,a,t){"use strict";var n=t(85893),l=t(41664),s=t.n(l),r=t(22578);a.Z=e=>{let{bot:a,onClick:l,children:o,className:i,...c}=e,d=(0,r.useFragment)(t(33891),a);return(0,n.jsx)(s(),{className:i,href:"/".concat(d.handle),prefetch:!1,onClick:l,...c,children:o})}},70138:function(e,a,t){"use strict";var n=t(67294);let l=n.createContext(null);a.Z=l},28976:function(e,a,t){"use strict";t.d(a,{W:function(){return k}});var n=t(85893),l=t(41143),s=t.n(l),r=t(67294),o=t(22578),i=t(49169),c=t(63236),d=t(70138),u=t(71289),g=t(34616),m=t(62394),_=t.n(m),h=t(8611),p=t(77614),b=t(81534);let k=(0,r.createContext)(null),MarkdownLinkInner=e=>{var a,l,m,f;let{prompt:v,className:w,...x}=e,y=null===(a=(0,r.useContext)(c.Z))||void 0===a?void 0:a.markdownLinkRef;s()(y,"chat is ".concat(y));let B=(0,r.useContext)(k);s()(B,"edges is ".concat(B));let M=null===(l=(0,r.useContext)(d.Z))||void 0===l?void 0:l.markdownLinkRef;s()(M,"current message is ".concat(M));let C=(0,o.useFragment)(t(48656),y),N=(0,o.useFragment)(t(9945),C.defaultBotObject),j=(0,o.useFragment)(t(19507),B),Z=(0,o.useFragment)(t(19266),M),{openPaywall:F,shouldPromptSubscription:I}=(0,i.rk)(),{logClick:S}=(0,b.B)(N),L=(0,r.useCallback)(()=>{S(p.Z.limited_access_bot),F()},[S,F]),T=null!==(f=null===(m=j[j.length-1])||void 0===m?void 0:m.node)&&void 0!==f?f:null,P=(0,r.useMemo)(()=>({sourceType:"linked_phrase",linkedMetadata:{linkedMessageId:Z.messageId,linkedPhrase:v}}),[v,Z]),D=(0,u.$3)(C,N,P),K=(0,r.useCallback)(()=>{(null==T?void 0:T.state)!==h.Z.incomplete&&D({prompt:v})},[D,v,T]);return(0,n.jsx)("a",{...x,className:(0,g.$)(w,_().linkifiedLink),onClick:I?L:K,href:void 0})};a.Z=e=>{try{var a,t;let l=null===(t=e.node)||void 0===t?void 0:null===(a=t.properties)||void 0===a?void 0:a.href;if(l){let a=new URL(l);if("poe:"===a.protocol){let t=a.searchParams.get("prompt");return s()(t,"prompt is ".concat(t)),(0,n.jsx)(MarkdownLinkInner,{...e,prompt:t})}}return(0,n.jsx)("a",{...e,target:"_blank"})}catch(a){return(0,n.jsx)(n.Fragment,{children:e.children})}}},63435:function(e,a,t){"use strict";let n;t.d(a,{ZP:function(){return message_Message}});var l,s=t(85893),r=t(41143),o=t.n(r),i=t(67294),c=t(22120),d=t(22578);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}t(44311);var nosign=function(e){return i.createElement("svg",_extends({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=i.createElement("path",{d:"M18.364 5.636 5.636 18.364A8.972 8.972 0 0 1 3 12a9 9 0 0 1 9-9 8.972 8.972 0 0 1 6.364 2.636Zm0 0A8.972 8.972 0 0 1 21 12a9 9 0 0 1-9 9 8.972 8.972 0 0 1-6.364-2.636L18.364 5.636Z",className:"nosign_svg__icon_svg-stroke"})))},u=t(71289),g=t(34616),m=t(42583),_=t.n(m),h=t(89083),p=t(8611),b=t(49175),k=t(24087),f=t(28986),v=t(81191),w=t.n(v),x=t(8693),y=t(26671),B=t(63236),M=t(70138),C=t(41677),N=t(19029),j=t(50530),Z=t(73494),F=t.n(Z),I=t(6488),S=t(39885),L=t(69295),T=t(2197);let P=/language-(\w+)/,useLowlight=()=>{let[e,a]=(0,i.useState)(n),l=(0,i.useMemo)(()=>Promise.all([t.e(5957),t.e(125),t.e(7764),t.e(6965),t.e(1708),t.e(6563),t.e(295),t.e(4360),t.e(8967),t.e(3180),t.e(9651)]).then(t.t.bind(t,26912,23)),[]);return(0,i.useEffect)(()=>{e||l.then(e=>{a(n=e)})},[l,e]),e},useDetectLanguage=(e,a)=>{let t=useLowlight(),n=(0,i.useMemo)(()=>{let n=null==a?void 0:a.match(P);if(n)return{language:n[1].toLowerCase(),showLanguageName:!0};if(!t)return;let l=t.highlightAuto(e);return{language:l.language,showLanguageName:l.relevance>=10}},[t,e,a]);return n},PreBlock=e=>{let{languageMatch:a,code:t,...n}=e,{t:l}=(0,c.$G)(),r=(0,T.ZP)(),d=(0,i.useContext)(B.Z),u=null==d?void 0:d.botId,g=null==d?void 0:d.model,m=null==d?void 0:d.chatId,_=(0,i.useContext)(M.Z),h=null==_?void 0:_.messageId,p=(0,i.useCallback)(()=>{navigator.clipboard.writeText(t.trim()),r({content:l("Copied to clipboard"),type:T.pC.success}),d&&(o()(u,"botId is ".concat(u)),o()(m,"chatId is ".concat(m)),o()(h,"messageId is ".concat(h)),o()(g,"model is ".concat(g)),(0,N.Z)("poe/action_log",{action_type:(0,S.E)(I.Z.copy_code),bot_id:u,chat_id:m,message_id:h,model_name:g}))},[t,u,h,m,g,d,r,l]);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:F().codeHeader,children:[(0,s.jsx)("div",{className:F().languageName,children:(null==a?void 0:a.showLanguageName)&&a.language}),(0,s.jsxs)(L.t9,{className:F().copyButton,onClick:p,children:[(0,s.jsx)(C.Z,{})," ",l("Copy")]})]}),(0,s.jsx)("pre",{...n,className:F().preTag})]})},CodeBlock=e=>(0,s.jsx)("code",{...e,className:F().codeTag});var message_MarkdownCodeBlock=e=>{let{className:a,children:t}=e,n=(0,j.HD)(t[0])?t[0]:"",l=useDetectLanguage(n,a),r=(0,i.useCallback)(e=>(0,s.jsx)(PreBlock,{...e,languageMatch:l,code:n}),[n,l]);return(0,s.jsx)(x.Z,{style:y.Vg,className:a,PreTag:r,CodeTag:CodeBlock,...l?{language:l.language}:{},children:n})},D=t(3102),K=t(99240),O=t(97341),H=t(7700),V=t(92913),E=t.n(V);let getSrcSize=e=>{try{if(!e)return null;let a=new URL(e),t=parseInt(a.searchParams.get("w")||""),n=parseInt(a.searchParams.get("h")||"");if(Number.isNaN(t)||Number.isNaN(n))return null;return{width:t,height:n}}catch(e){return null}};var message_MarkdownImage=e=>{let{enableImageViewer:a=!1,alt:t,src:n,...l}=e,r=(0,i.useRef)(null),[o,c]=(0,H.y)(),d=(0,i.useCallback)(async()=>{n&&await o(n,t)},[n,t,o]),[u,m]=(0,i.useState)(!1),_=(0,i.useCallback)(()=>{m(!0)},[m]);(0,i.useEffect)(()=>{var e;(null===(e=r.current)||void 0===e?void 0:e.complete)&&_()},[_]);let h=getSrcSize(n),p=(0,i.useContext)(D.Z),b=(0,i.useCallback)(()=>{a&&n&&p({src:n,alt:t})},[n,t,a,p]);return(0,s.jsxs)("span",{className:E().imageContainer,children:[h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{className:(0,g.$)(E().image,E().withPlaceholder),ref:r,src:n,alt:t,...l,onLoad:_,onClick:b}),(0,s.jsx)("canvas",{height:h.height,width:h.width,className:E().placeholder})]}):(0,s.jsx)("img",{className:E().image,ref:r,src:n,alt:t,...l,onLoad:_,onClick:b}),u&&n&&(0,s.jsx)(L.Xd,{className:E().downloadImageButton,"data-downloading":c,disabled:c,onClick:c?void 0:d,icon:c?(0,s.jsx)(O.Z,{}):(0,s.jsx)(K.Z,{})})]})},R=t(28976);let getImageSrc=(e,a)=>{if(!e)return"";try{let t=new URL(e);if(["qph.fs.quoracdn.net","qph.cf2.quoracdn.net","qph.cf2.poecdn.net"].includes(t.hostname))return e;if(void 0!==a&&!a.includes(t.hostname))return"";return e}catch(e){return""}},A={a:e=>{let{...a}=e;return(0,s.jsx)(R.Z,{className:w().link,...a})},code:e=>{let{inline:a,...t}=e;return a?(0,s.jsx)("code",{...t}):(0,s.jsx)(message_MarkdownCodeBlock,{...t})},pre:e=>{let{children:a}=e;return(0,s.jsx)(s.Fragment,{children:a})}},U={img:()=>null},G=[k.Z,f.Z];var message_Markdown=e=>{let{text:a,allowImages:t=!1,enableImageViewer:n=!1,promptBotImageDomainWhiteList:l}=e,r=(0,i.useCallback)(e=>getImageSrc(e,l),[l]),o=(0,i.useMemo)(()=>({...A,...t?{img:e=>{let{...a}=e;return(0,s.jsx)(message_MarkdownImage,{enableImageViewer:n,...a})}}:U}),[t,n]);return(0,s.jsx)("div",{className:w().markdownContainer,children:(0,s.jsx)(b.D,{components:o,remarkPlugins:G,transformImageUri:r,children:a.replace("\n\nHuman","").trim()})})};let MessageBubble=e=>{let{text:a,messageTimeoutSecs:t=15,botDisplayName:n,isBot:l,isCancelled:r=!1,isOptimistic:i,timeoutLevel:d,offlineError:u=!1,state:m,allowImages:b,contentType:k=h.Z.text_markdown,promptBotImageDomainWhiteList:f,enableImageViewer:v=!1,footer:w}=e,{t:x}=(0,c.$G)(),y=null,B=Math.floor(t/5);m===p.Z.error?y=x(l?"Unable to reach Poe.":u?"Unable to send this message. Check your internet connection.":d<3?"Message failed to send.":"Unable to reach Poe."):m===p.Z.error_llm?(o()(n,"botDisplayName is ".concat(n)),y=x("{{botName}} ran into a problem answering your request.",{botName:n})):m===p.Z.error_user_message_too_long?y=x("This message is too long. Retry with a shorter message."):r||(i&&!l?y=x(d?d<3?"Still sending...":"Unable to reach Poe.":"Sending..."):1===d?y=x("Waiting..."):d>1&&d<B?y=x("Still waiting..."):d===B&&(o()(n,"botDisplayName is ".concat(n)),y=x("{{botName}} did not respond.",{botName:n})));let M=(0,g.$)(_().row,!l&&_().humanRow),C=(0,g.$)(l?_().botMessageBubble:_().humanMessageBubble,(m===p.Z.error||m===p.Z.error_llm||d===B)&&_().errorBubble);return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:M,children:(0,s.jsxs)("div",{className:C,children:[l&&!a?m===p.Z.incomplete?(0,s.jsx)("p",{className:_().plaintext,children:"..."}):(0,s.jsx)(nosign,{className:_().noSignIcon}):k===h.Z.text_markdown?(0,s.jsx)(message_Markdown,{text:a,allowImages:b,enableImageViewer:v,promptBotImageDomainWhiteList:f}):(0,s.jsx)("p",{className:_().plaintext,children:a}),w]})}),(0,s.jsx)("div",{"data-visible":i||d>0||m===p.Z.error||m===p.Z.error_llm||m===p.Z.error_user_message_too_long||void 0,className:l?_().botOptimisticFooter:_().humanOptimisticFooter,children:y})]})},BreakLine=()=>(0,s.jsx)("div",{className:_().breakLine}),ChatBreak=()=>{let{t:e}=(0,c.$G)();return(0,s.jsxs)("div",{className:_().chatBreak,children:[(0,s.jsx)(BreakLine,{}),e("Context cleared"),(0,s.jsx)(BreakLine,{})]})};var message_Message=e=>{let{text:a,author:n,messageTimeoutSecs:l,botDisplayName:r,viewer:o,bot:i,isCancelled:c=!1,isOptimistic:g=!1,timeoutLevel:m=0,offlineError:_=!1,state:b=p.Z.complete,contentType:k=h.Z.text_markdown,footer:f}=e,{allowImages:v,allowImagesForApiBots:w,enableImageViewer:x,promptBotImageDomainWhitelist:y}=(0,d.useFragment)(t(94864),o),{isApiBot:B}=(0,d.useFragment)(t(98989),i);return n===u.Tt.chatBreak?(0,s.jsx)(ChatBreak,{}):(0,s.jsx)(MessageBubble,{text:a,messageTimeoutSecs:l,botDisplayName:r,isBot:n!==u.Tt.human,isCancelled:c,isOptimistic:g,timeoutLevel:m,offlineError:_,state:b,allowImages:v||w&&n===u.Tt.pacarana,contentType:k,promptBotImageDomainWhiteList:B?void 0:y,enableImageViewer:x,footer:f})}},7700:function(e,a,t){"use strict";t.d(a,{y:function(){return useDownloadImage}});var n=t(67294),l=t(22120),s=t(63236),r=t(70138),o=t(2197),i=t(19029),c=t(6488),d=t(39885),u=t(62341);let generateRandomString=e=>[...Array(e)].map(()=>(26*Math.random()|0).toString(36)).join(""),useDownloadImage=()=>{let[e,a]=(0,n.useState)(!1),t=(0,n.useContext)(r.Z),g=(0,n.useContext)(s.Z),{t:m}=(0,l.$G)(),_=(0,o.ZP)(),h=(0,n.useCallback)(()=>{_({type:o.pC.error,content:m("Failed to download image.")})},[_,m]);return[async(e,n)=>{if((0,i.Z)("poe/action_log",{action_type:(0,d.E)(c.Z.save_image),bot_id:null==g?void 0:g.botId,message_id:null==t?void 0:t.messageId,action_metadata:{image_src:e}}),e)try{a(!0);let t=await fetch(e);if(200!==t.status){(0,u.H)(Error("Failed to download image (".concat(e,"). Status code: ").concat(t.status,"."))),h();return}let l=await t.blob();if(!l||!l.type.startsWith("image")){(0,u.H)(Error("Failed to download image (".concat(e,"). Invalid image type: ").concat(null==l?void 0:l.type,"."))),h();return}let s=l.type.split("/")[1],r=URL.createObjectURL(l),o=document.createElement("a");o.href=r;let i=(null==n?void 0:n.replaceAll(/\s+/g,"_"))||"poe_"+generateRandomString(6);o.download="".concat(i,".").concat(s),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r)}finally{a(!1)}},e]}},24165:function(e){e.exports={title:"BotHeader_title__cURS_",boldTitle:"BotHeader_boldTitle__KgfYh",textContainer:"BotHeader_textContainer__kVf_I",subText:"BotHeader_subText__0Nkxq"}},57031:function(e){e.exports={endSelectionButton:"ChatPageNavbar_endSelectionButton__V5yoM",shareButton:"ChatPageNavbar_shareButton__QuaBY",noTextShareButton:"ChatPageNavbar_noTextShareButton__Y7z4N",rightNavItemWrapper:"ChatPageNavbar_rightNavItemWrapper__hlLkg",shareTextWrapper:"ChatPageNavbar_shareTextWrapper__yHoeV",shareText:"ChatPageNavbar_shareText__Gm0Zc",signUpText:"ChatPageNavbar_signUpText__wlCfd",closeIcon:"ChatPageNavbar_closeIcon__eqA3l"}},81191:function(e){e.exports={markdownContainer:"Markdown_markdownContainer__Tz3HQ",downloadImageButton:"Markdown_downloadImageButton__RCbDB"}},73494:function(e){e.exports={codeHeader:"MarkdownCodeBlock_codeHeader__zWt_V",preTag:"MarkdownCodeBlock_preTag__QMZEO",codeTag:"MarkdownCodeBlock_codeTag__5BV0Z",copyButton:"MarkdownCodeBlock_copyButton__1_hA9",languageName:"MarkdownCodeBlock_languageName__4_BF8"}},92913:function(e){e.exports={imageContainer:"MarkdownImage_imageContainer__rAeth",image:"MarkdownImage_image__3dBzJ",withPlaceholder:"MarkdownImage_withPlaceholder__SCN0A",placeholder:"MarkdownImage_placeholder__ZmySQ",downloadImageButton:"MarkdownImage_downloadImageButton__G4i1S",spin:"MarkdownImage_spin__izCcd"}},62394:function(e){e.exports={linkifiedLink:"MarkdownLink_linkifiedLink__BepcK"}},42583:function(e){e.exports={humanMessageBubble:"Message_humanMessageBubble__DtRxA",botMessageBubble:"Message_botMessageBubble__aYctV",errorBubble:"Message_errorBubble__Bl92G",breakLine:"Message_breakLine__Szhtx",chatBreak:"Message_chatBreak__WMd1Y",humanOptimisticFooter:"Message_humanOptimisticFooter__buJvs",botOptimisticFooter:"Message_botOptimisticFooter__FL0c_",row:"Message_row__ug_UU",humanRow:"Message_humanRow__5X_jz",expander:"Message_expander__5gU_H",noSignIcon:"Message_noSignIcon__11Dy5",plaintext:"Message_plaintext__sTseT"}}}]);